# WorldVoice

В мире с высоким уровнем сетевого взаимодействия и интернационализации изучение языков приобрело еще большее значение. В материалах для изучения языков лексика и значения предложений на иностранных языках обычно объясняются на родном языке, и очень часто два или более языков перемежаются. В повседневной жизни мы часто используем несколько языков в общении и дискуссиях. В книгах, газетах и онлайн-статьях нередко можно увидеть, что для передачи информации используются несколько языков, а в некоторых случаях одно и то же предложение представлено в сочетании английского, китайского и японского языков.

Состав текста, контекстуальное значение, частота встречаемости на разных языках и другие характеристики различного цифрового контента (изучение языка, математика, литература) могут отличаться, и способ его чтения может потребовать тонкой настройки, чтобы лучше соответствовать потребностям данного типа документов.

WorldVoice предлагает широкий спектр возможностей настройки, которые позволяют пользователям устанавливать различные параметры в различных контекстах, максимально удовлетворяя потребности различных групп пользователей.

WorldVoice - это многоязычное дополнение NVDA для чтения вслух, которое можно использовать в NVDA от версии 2020.1 и новее.

* автор: Tseng Woody
* <tsengwoody.tw@gmail.com>
* [Страница дополнения на GitHub](https://github.com/tsengwoody/WorldVoice)

### Основные характеристики включают.

* Автоматическое многоязычное голосовое переключение
* Индивидуальные настройки параметров речи (скорость, высота тона, громкость)
* Переключение чтения цифр (цифры полностью или по цифре)
* Настройка поведения при чтении вслух (длительность паузы для переключения символов, длительность паузы для китайских пробелов, игнорирование запятых между цифрами)
* Настраиваемая текстовая область

С WorldVoice версии 3.0 реализована поддержка синтезаторов речи Aisound, SAPI5, VocalizerExpressive 2 и 1.

## Установка

* Установите основной драйвер WorldVoice
* Установите пакет ядра и голосовой пакет по мере необходимости, в настоящее время поддерживаются драйвер VE и Aisound.
* Установите основной пакет: импортируйте соответствующий zip-файл основного пакета в рабочее пространство дополнения через Меню NVDA, WorldVoice подменю, Установка ядра VE или Установка ядра Aisound.
* Для управления ядром VE в операционной системе должна быть установлена системная библиотека x86 версия [VC++ Redistributable Packages 2012](https://www.microsoft.com/en-US/download/details.aspx?id=30679) (VSU_4\). vcredist_x86.exe). Если вы не можете загрузить синтезатор WorldVoice даже после установки пакета ядра и голосового пакета, попробуйте установить этот компонент.
* Установка голосового пакета VE Voice Pack.
	* Базовый: Используйте аддон Vocalizer for NVDA compatible voice pack, [официальный пункт загрузки](https://vocalizer-nvda.com/downloads).
	* Дополнительно: Вы можете скопировать региональные папки (например: en, mnc, mnt) непосредственно из различных голосовых пакетов, сжать их в zip-архив и импортировать в аддон с помощью функции импорта файлов интерфейса WorldVoice.

## Настройки

NVDA+ctrl+S переключение на голосовой синтезатор WorldVoice.

### Настройка персонажа основного голоса 

С помощью настройки NVDA: Речь (NVDA+ctrl+V) установите базовые голосовые роли и ко-пассивы на

* Настройки скорости, высоты и громкости голоса
* Чтение цифр: 2 варианта настройки 'Язык цифр' и 'Режим цифр', Язык цифр устанавливает голосовой символ, используемый для чтения цифр, Режим цифр делится на По цифре и целым числом
* Длина паузы между символами: устанавливает длину паузы при переключении между символами.
* Длина паузы между китайскими пробелами: устанавливает длину паузы между китайскими пробелами, чем меньше число, тем короче пауза, 0 означает отсутствие паузы.
* Игнорировать запятые между цифрами: эта опция игнорирует запятые в середине цифр, если она отмечена, что позволяет прочитать цифру вслух, даже если запятая поставлена неправильно.
* Включить правила настройки WorldVoice для определения языка текста: если флажок установлен, правила настройки Речи используются для определения языка текста и переключения чтения голосом. В некоторых случаях эта опция может иметь проблемы совместимости с автоматическим переключением языков NVDA, поэтому рекомендуется снять флажки с обеих опций.

### Многоязычные голосовые настройки

WorldVoice -> Настройки голоса: позволяет установить голосовые символы, используемые в различных регионах, скорость, высоту тона, громкость и параметры автоматического переключения голоса для каждого голосового символа.

* После выбора региона в списке голосов будут перечислены доступные голосовые символы для этого региона.
* При выборе голосового персонажа отображается список доступных голосов для этого персонажа, и выбор завершает список голосов для этого персонажа.
* Когда выбран голосовой символ, расположенные ниже регуляторы скорости, высоты тона и громкости изменятся на значение, установленное для этого голосового символа.
* Скорость, высота тона и громкость различаются по голосовому персонажу, причем каждый голосовой персонаж имеет свое значение скорости, а не по региону.
* Сохраняйте основной голосовой движок таким же, как и региональный голосовой движок: совместите голос (основной голос) персонажа в настройках голоса NVDA с региональным аналогом (региональным голосом) движка в настройках голоса WorldVoice, чтобы при настройке основного голоса региональный голос одновременно подстраивался под тот же голосовой движок.
* Совместить роль основного голоса с ролью регионального голоса: Совместите роль голоса (основной голос) в настройках голоса NVDA с ролью регионального аналога (региональный голос) в настройках голоса WorldVoice, и когда настраиваются настройки основного или регионального голоса, настройки роли голоса для обоих настраиваются одновременно.
* Поддерживайте согласованность между параметрами основного голоса и параметрами регионального голоса: согласуйте параметры голоса (основной голос) в настройках голоса NVDA с параметрами регионального аналога (региональный голос) (скорость, высота тона, громкость) в настройках голоса WorldVoice, и регулируйте параметры обоих голосов одновременно при настройке параметров основного или регионального голоса.
* Если установлен флажок Определять язык текста с кодом unicode, программа будет определять локаль на основе прочитанных символов.
* Игнорировать цифры при определении языка, игнорировать общие знаки препинания при определении языка, цифры и знаки препинания будут определяться как региональные символы для речи по умолчанию.
* Определение временной точки языка: Текст автоматически определяет временную точку языка до или после обработки символов NVDA. Это предотвращает конфликты с другими дополнениями, использующими речевой модуль (например, Instant Translate), когда выбран пункт 'После обработки'.

### Другие параметры.

WorldVoice -> Настройки Unicode: определяет локаль, к которой принадлежит символ, и определяет локаль символа по контексту или обязательному режиму. Эта функция решает проблему того, что внутренние правила преобразования символов NVDA не читаются вслух при автоматическом переключении языка. Например, в некоторых случаях ". не читается, попробуйте добавить символ "." к правилу и выбрать язык и режим. в правилах и выберите язык и режим для правильного чтения.

WorldVoice -> Импорт файлов: вы можете импортировать файлы, которые могут быть использованы для импорта речевых пакетов.

### Перевод

* Валентин Куприянов, Русский язык.

## Журнал версий

### v3.2

* Исправлена проблема настройки голоса, когда WorldVoice не выбран в голосовом синтезаторе, теперь отображается текст подсказки.
* Исправлена проблема с регулировкой громкости звука.
* Исправлено условие перезапуска для обнаружения временных точек языка в настройках голоса
* Исправлено длительное нажатие клавиши, из-за которого речь не прерывалась
* Исправлены различные семантические проблемы (flake8)
* Совместимость с NVDA версии 2022.1

### v3.1

* прерывание беззвучных объявлений во время просмотра веб-страниц
* переключить, чтобы приостановить/продолжить голосовое оповещение
* Нажатие кнопки увеличения или уменьшения громкости не прерывает чтение
* Поддерживать согласованность между основным голосовым движком и региональными голосовыми движками
* Исправлено то, как ВЭ делает паузы

### v3.0

* Поддержка голосового движка SAPI5
* Поддержка голосового движка Aisound
* Новая длительность паузы при переключении между ролями голоса в настройках голоса
* Новая опция нормализации юникода в настройках голоса
* Сортировка голосовых персонажей по голосовому движку и имени персонажа

### v2.2

* Новая опция изменения голоса в настройках голоса, необходимо установить регион, голос и опции изменения голоса по порядку
* Исправлена проблема, из-за которой время определения языка не могло быть изменено после выбора "перед обработкой символов".
* Добавлен арабский перевод

### v2.1

* Совместимость с NVDA версий 2019.3~2021.1
* Настройки конфигурации NVDA могут быть применены
* Удалены лишние жесты ввода.
* Процент преобразования внутреннего значения скорости изменен на нелинейный расчет
* Настройка меню настроек для изменения "Определять язык текста после обработки символов" на "Определять временную точку языка".
* Определение языковой точки во времени: символ автоматически определяет языковую точку во времени до или после обработки символа NVDA. При выборе пункта 'После обработки символов' можно предотвратить конфликты с другими дополнениями, использующими речевой модуль (например, Instant Translate).
* Поддерживайте согласованность между параметрами основного голоса и параметрами регионального голоса: согласуйте параметры голоса (основной голос) в настройках голоса NVDA с параметрами регионального аналога (региональный голос) (скорость, высота тона, громкость) в настройках голоса WorldVoice и регулируйте параметры обоих голосов одновременно при настройке параметров основного или регионального голоса.
* Поддерживайте согласованность между основной и региональной ролью голоса: согласуйте роль голоса (основной голос) в настройке голоса NVDA с ролью регионального аналога (региональный голос) в настройке голоса WorldVoice и настройте обе роли голоса одновременно, когда настраивается основная или региональная роль голоса.

### v2.0

* Совместимость с NVDA 2021.1

### v1.7

* Исправлена нечитаемость десятичной точки (десятичная точка между всеми тремя числами)
* Совместимость с предыдущей финальной версией NVDA 2021.1

### v1.6

* Исправлена десятичная точка, не читаемая вслух в числовом режиме
* Обновлена рабочая директория основного пакета VE, чтобы позволить будущие обновления без повторного импорта.
* Разделили переключатель "Использовать WorldVoice для установки правил для целевого языка" и переключатель "Автоматически переключать язык", чтобы избежать несовместимости между ними в некоторых случаях.
* Исправлена проблема при включении автоматического определения языка в юникоде, когда язык по умолчанию не совпадал с языковым регионом NVDA, но был на том же языке.
* Исправлена команда смены языка WorldVoice, которая отфильтровывалась, когда автопереключение языка снято.

### v1.5

* Чтение чисел разделено на 2 варианта настройки "Язык чисел" и "Режим чисел", которые для удобства выбора разделены на 2 измерения
* Опция игнорирования межразрядных запятых для корректного чтения числовых отчетов
* Функция автоматического определения языка использует различные файлы интерпретации только в том случае, если отмечен доверенный язык
* Настройка значения в голосовой настройке вступит в силу, только если вы нажмете подтверждение и отмену, чтобы вернуться к значению до настройки
* Фиксация значения в настройках голоса, когда голос совпадает с голосом по умолчанию, а затем перезапуск NVDA возвращает предустановленное значение
* Объединение автоматического переключения языка с окном настройки голоса
* Добавить отмену выбора для региона и голосового отображения для отмены отображения.
* Поддержка всплывающих окон с быстрыми клавишами для голосовых настроек и настроек Unicode

### v1.4

* Исправлено отсутствие голоса при просмотре отчета
* Процент преобразования внутреннего значения тона изменен на нелинейный, так что значение по умолчанию равно 50
* Исправлена ошибка обнаружения заднего текста в принудительном режиме правил юникода
* Исправлен неверный тип начального значения, приводивший к невозможности отображения диалогового окна настройки голоса
* Начальный голос изменен, чтобы отдать предпочтение голосу языка по умолчанию

### v1.3

* Добавьте функцию настройки юникода
* Исправлена проблема, при которой одиночные цифры не переключались автоматически
* Исправлен цифровой режим, не работающий в некоторых сценах.
* Удален драйвер 1 из версии 1.2
* Скорректирована структура программы и поддерживается больше TTS

### v1.2

* Доступен драйвер 2, в целом более плавный, чем драйвер 1, без случайных нестыковок скорости и небольших всплесков.
* Особенности драйвера 2 включают цифровой режим, китайский пробел, игнорирование информации о языке в файлах и другие опции по сравнению с драйвером 1.
* Драйвер 2 обеспечивает индивидуальную регулировку скорости, высоты тона и громкости, но соответствующие значения отличаются от драйвера 1, т.е. скорость 50 драйвера 1 и скорость 50 драйвера 2 не будут иметь одинаковую скорость речи
* Исправлена проблема, из-за которой время и десятичные точки неправильно считывались в числовом режиме при выборе каждого значения речи
* Исправлена проблема, при которой информация об области не читалась вслух, если не был определен символ
* Исправлена проблема, при которой числовой режим не использовал выбранный голос правильно при выборе каждого числового голоса
* Скорректирован порядок обработки языковой информации в числовом режиме и игнорирования файлов, чтобы лучше соответствовать ожидаемой логике чтения.

### v1.1

* Новая опция для числового режима, которая позволяет читать вслух числа на установленном языке и разделять их на цифровые и числительные.
* Новая опция игнорирования языковой информации в документах. Это сделано для того, чтобы избежать возможности неправильного чтения вслух, когда флажок языка автоматически переключается, а в исходном документе содержится неправильная языковая информация (например, китайский текст помечен как английский язык) или когда номера слов помечены как английский язык и автоматически читаются вслух на английском языке.
* Оптимизация китайских пустых пространств, чтобы китайские объекты и китайские атрибуты могли быть поставлены на паузу
* Добавьте перевод интерфейса для других китайских языков
* Пропустить загрузку функции изменения голоса из файла конфигурации, поскольку функция изменения голоса, лежащая в основе текущего драйвера VE, не работает должным образом, и при изменении голоса легко удалить весь файл конфигурации из-за сбоя загрузки настроек
* Объединено с обновлениями драйвера VE 3.1.2
* Другие незначительные улучшения
